{% extends "base.html" %}

{% block title %}Szenario {{ scenario_num }} - SP Umfrage{% endblock %}

{% block content %}
<div class="survey-section">
    <div class="progress-bar">
        <div class="progress-fill" style="width: {{ 50 + (scenario_num / 12 * 25) }}%;"></div>
    </div>
    <p class="progress-text">Teil 3 von 4: Wahlszenarien (Szenario {{ scenario_num }} von {{ total_scenarios }})</p>
    
    <form method="POST" id="choiceForm" class="survey-form">
        <h2>Szenario {{ scenario_num }}</h2>
        <p class="section-description">
            Stellen Sie sich vor, Sie mÃ¼ssen eine Fahrt unternehmen. 
            Welche der folgenden Optionen wÃ¼rden Sie wÃ¤hlen?
        </p>
        
        <div class="choice-container">
            {% for alt_id, alt_data in scenario.alternatives.items() %}
            <div class="choice-card" onclick="selectChoice('{{ alt_id }}')">
                <input type="radio" name="choice" value="{{ alt_id }}" id="choice_{{ alt_id }}" required>
                <label for="choice_{{ alt_id }}">
                    <div class="choice-header">
                        <span class="choice-label">Option {{ alt_id }}</span>
                        <span class="mode-icon">
                            {% if alt_data.mode == 'Auto (privat)' %}ğŸš—
                            {% elif alt_data.mode == 'Ã–PNV' %}ğŸšŒ
                            {% elif alt_data.mode == 'Fahrrad / E-Bike' %}ğŸš²
                            {% elif alt_data.mode == 'Autonomes Ridesharing' %}ğŸ¤–
                            {% endif %}
                        </span>
                    </div>
                    
                    <div class="choice-attribute">
                        <span class="attr-label">Verkehrsmittel:</span>
                        <span class="attr-value">{{ alt_data.mode }}</span>
                    </div>
                    
                    <div class="choice-attribute">
                        <span class="attr-label">â±ï¸ Reisezeit:</span>
                        <span class="attr-value">{{ alt_data.time }} min</span>
                    </div>
                    
                    <div class="choice-attribute">
                        <span class="attr-label">ğŸ’° Kosten:</span>
                        <span class="attr-value">{{ alt_data.cost }} â‚¬</span>
                    </div>
                    
                    <div class="choice-attribute">
                        <span class="attr-label">âœ“ ZuverlÃ¤ssigkeit:</span>
                        <span class="attr-value">{{ alt_data.reliability }}%</span>
                    </div>
                    
                    <div class="choice-attribute">
                        <span class="attr-label">ğŸŒ± COâ‚‚-AusstoÃŸ:</span>
                        <span class="attr-value co2-{{ alt_data.co2|replace(' ', '-') }}">{{ alt_data.co2 }}</span>
                    </div>
                </label>
            </div>
            {% endfor %}
            
            <div class="choice-card choice-none" onclick="selectChoice('none')">
                <input type="radio" name="choice" value="none" id="choice_none" required>
                <label for="choice_none">
                    <div class="choice-header">
                        <span class="choice-label">Keine davon</span>
                        <span class="mode-icon">ğŸš«</span>
                    </div>
                    <p class="none-description">
                        Ich wÃ¼rde keine dieser Optionen wÃ¤hlen und die Fahrt nicht antreten.
                    </p>
                </label>
            </div>
        </div>
        
        <div class="button-container">
            {% if scenario_num > 1 %}
            <a href="{{ url_for('choice', scenario_num=scenario_num-1) }}" class="btn btn-secondary">â† ZurÃ¼ck</a>
            {% endif %}
            <button type="submit" class="btn btn-primary">
                {% if scenario_num < total_scenarios %}
                Weiter â†’
                {% else %}
                Weiter zu Teil 4 â†’
                {% endif %}
            </button>
        </div>
    </form>
</div>

<script>
function selectChoice(choiceId) {
    document.getElementById('choice_' + choiceId).checked = true;
    // Visuelle Hervorhebung
    document.querySelectorAll('.choice-card').forEach(card => {
        card.classList.remove('selected');
    });
    document.getElementById('choice_' + choiceId).parentElement.classList.add('selected');
}
</script>
{% endblock %}
